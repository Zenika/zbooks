<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zenika.zbooks.persistence.ZUserMapper">

	<resultMap type="ZUser" id="ZUser">
		<id column="id" property="id"/>
		<result column="userName" property="userName"/>
		<result column="password" property="password"/>
		<result column="zPower" property="zPower" typeHandler="org.apache.ibatis.type.EnumOrdinalTypeHandler" />
	</resultMap>

	<insert id="addZUser" parameterType="ZUser" timeout="10">
		INSERT INTO 
			zUser (userName, password) 
		VALUES
			(#{userName}, #{password})
	</insert>
	
	<delete id="deleteZUser" parameterType="int" timeout="10">
		DELETE FROM zUser WHERE id=#{id}
	</delete>
	
	<select id="getZUser" parameterType="map" resultMap="ZUser" timeout="10">
		SELECT * FROM zUser WHERE (userName=#{userName} AND password=#{password}) LIMIT 1
	</select>
</mapper>